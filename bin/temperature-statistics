#!/usr/bin/env node
const config = require('../lib/utils/config');
const Server = require('../lib/server');
const Storage = require('../lib/storage');
const logger = require('../lib/utils/logger');

const storage = new Storage();
const server = new Server({ storage });

storage.connection().then(() => {
  server.start(config.server.port, () => {
    logger.info(`server startup at port ${ config.server.port }`);
  });
}).catch(err => {
  logger.error(err);
  process.exit(1);
});
